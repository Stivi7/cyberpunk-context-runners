---
description:
globs:
alwaysApply: true
---

# Cursor IDE Rules

## Cyberpunk Agent System

This project uses specialized AI agents to guide development. After running `cyberpunk init`, all agents are available as standalone Cursor agents.

### Available Agents

Each agent is self-contained with its complete definition in `.cursor/agents/` and automatically references shared principles from `agents/_common-principles.md`.

**Agents:**
- **The Operator** - Project Matrix Navigator: Analyzes codebase and generates project-specific examples and standards
- **The Nexus** - PRP Creator: Converts business requirements into structured Product Requirement Prompts
- **The Mind** - Technical Planner: Creates architecture and phased implementation plans from PRPs
- **The Interrogator** - Plan Reviewer: Validates plans for completeness, clarity, feasibility, and risk
- **The Fragmenter** - Task Builder: Breaks validated plans into executable epics, stories, and tasks
- **The Coder** - Task Executor: Implements code with functional patterns and writes comprehensive tests
- **The Grid Master** - DevOps Engineer: Handles infrastructure, IAM, and deployment pipelines
- **The Gatekeeper** - Code Reviewer: Reviews code quality and enforces functional, security, and quality standards

### How to Use Agents

1. **Select an agent** from Cursor's agent menu
2. **Start chatting** - The agent will automatically follow its protocols
3. Each agent knows its role, inputs, outputs, and interaction patterns

### Agent Workflow Process

0. **Operator**: Analyze project → Generate examples and standards for team
1. **Nexus**: Create PRP from requirements → Save to `PRPs/[feature].md`
2. **Mind**: Read PRP → Create technical plan → Save to `plans/[feature]-plan.md`
3. **Interrogator**: Review plan → Validate or request changes
4. **Fragmenter**: Break plan into tasks → Create in `tasks/[feature]/`
5. **Coder**: Implement tasks → Create code and writes tests
6. **Grid Master**: Setup infrastructure → CloudFormation or any other specified IaC templates
7. **Gatekeeper**: Final review → Quality assurance and approval

### Example Workflow

```
# Step 0: Analyze project (initial setup)
Select: The Operator
Chat: "Scan project and generate standards"
Result: Analyzes project structure and creates examples in examples/

# Step 1: Create requirements
Select: The Nexus
Chat: "Build a real-time chat application with WebSocket support"
Result: Creates comprehensive PRP saved to PRPs/chat-app.md

# Step 2: Design architecture
Select: The Mind
Chat: "Create technical plan from PRPs/chat-app.md"
Result: Creates technical architecture saved to plans/chat-app-plan.md

# Step 3: Review plan
Select: The Interrogator
Chat: "Review plans/chat-app-plan.md"
Result: Reviews plan and provides feedback or approval

# Step 4: Break into tasks
Select: The Fragmenter
Chat: "Break down plans/chat-app-plan.md into tasks"
Result: Creates detailed task breakdown in tasks/chat-app/

# Step 5: Implement features
Select: The Coder
Chat: "Implement WebSocket connection handler task"
Result: Writes functional code and comprehensive tests

# Step 6: Infrastructure
Select: The Grid Master
Chat: "Setup AWS infrastructure for chat app"
Result: Creates CloudFormation templates and deployment pipelines

# Step 7: Final review
Select: The Gatekeeper
Chat: "Review the chat application code"
Result: Performs quality review and provides approval or revision requests
```

### Agent Files

**Standalone Agents** (used by Cursor):
- `.cursor/agents/operator.mdc` - The Operator with complete definition
- `.cursor/agents/nexus.mdc` - The Nexus with complete definition
- `.cursor/agents/mind.mdc` - The Mind with complete definition
- `.cursor/agents/interrogator.mdc` - The Interrogator with complete definition
- `.cursor/agents/fragmenter.mdc` - The Fragmenter with complete definition
- `.cursor/agents/coder.mdc` - The Coder with complete definition
- `.cursor/agents/grid-master.mdc` - The Grid Master with complete definition
- `.cursor/agents/gatekeeper.mdc` - The Gatekeeper with complete definition

**Source Definitions** (referenced by standalone agents):
- `agents/_common-principles.md` - Shared principles and standards for all agents
- `agents/*.md` - Individual agent source definitions

**Examples and References**:
- `examples/` - Code patterns and implementation examples generated by The Operator

### File Organization

- **Requirements**: Save PRPs to `PRPs/[feature-name].md`
- **Plans**: Save technical plans to `plans/[feature-name]-plan.md`
- **Tasks**: Save task breakdowns to `tasks/[feature-name]/`
- **Code**: Implement in `src/` with proper functional structure
- **Tests**: Create comprehensive tests following Coder patterns
- **Infrastructure**: CloudFormation templates following Grid Master patterns

### Quality Standards

All code must pass Gatekeeper review:

- Functional programming compliance (pure functions, immutability, Result/Either types)
- Test coverage ≥95%
- Lint, format, and build gates must pass
- Security scanning in CI/CD
- Performance benchmarks met
- AWS best practices followed (or other cloud provider standards)

### Core Principles

All agents follow these principles from `agents/_common-principles.md`:

- **Functional Programming**: Pure functions, immutability, Result/Either types
- **AWS Stack**: Lambda, DynamoDB, API Gateway, CloudFormation/CDK (or other cloud providers as configured)
- **Quality Bar**: 95% test coverage, lint/format/build gates, security scans
- **Agent Output**: Lead with bullets/structure, include "Assumptions" section, ask clarifying questions when blocking

---

**Note**: Each agent has a distinct personality and specific expertise. They will automatically embody their identity and follow their protocols when selected.
